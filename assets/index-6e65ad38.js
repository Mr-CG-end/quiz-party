import{_ as w,w as y,a as g,k as S,e as u,b,g as t,l as k,h as C,T as M,m as x,D as V,u as L,c as z,p as E,r as _,d as p,F as I,f,t as m,q as h}from"./index-2e388ef4.js";const N={name:"VModal",props:{show:{type:String,default:!0}},setup(s,{emit:a}){const i=x(s,"show"),e=()=>{a("on-close")},r=o=>{const c=document.querySelector(".modal-wrapper");o.target===c&&e()},n=o=>{o.key==="Escape"&&e()};return y(i,o=>{o?(document.addEventListener("keyup",n),document.addEventListener("click",r)):(document.removeEventListener("keyup",n),document.removeEventListener("click",r))},{immediate:!0}),{show:i,onBackgroundClicked:r,onEscapeKeyClicked:n}}},O={key:0,class:"modal-wrapper"},q={class:"modal"};function B(s,a,i,e,r,n){return g(),S(M,{name:"modal"},{default:u(()=>[e.show?(g(),b("div",O,[t("div",q,[k(s.$slots,"default",{},void 0,!0)])])):C("",!0)]),_:3})}const R=w(N,[["render",B],["__scopeId","data-v-1701abbd"]]),v=[{name:"酷炫宇航员",summary:"一如既往的优秀，不得不说，这也是我们对您的期望。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/astronaut.jpg",minimumScore:2700},{name:"善良的大象",summary:"这只善良的大象会一直陪伴着你，让你不再感到孤单。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/elephant.jpg",minimumScore:1500},{name:"半死不活的树懒",summary:"也许只要你表现得稍微好一点，你的父母就会为你感到骄傲。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/sloths.jpg",minimumScore:0}];const D={name:"ResultView",components:{VModal:R,DefaultLayout:V},setup(){const s=f(0),a=f(!1),i=L(),e=z(()=>v.find(c=>s.value>=c.minimumScore));E(()=>{localStorage.getItem("score")&&(s.value=JSON.parse(localStorage.getItem("score")))});const r=()=>{a.value=!0},n=()=>{a.value=!1},d=c=>{let l=[];localStorage.getItem("leaderboard")&&(l=JSON.parse(localStorage.getItem("leaderboard"))),l.push(c),localStorage.setItem("leaderboard",JSON.stringify(l))};return{score:s,isModalOpen:a,characters:v,character:e,openModal:r,closeModal:n,onCharacterSubmited:()=>{d({image:e.value.image,name:e.value.name,score:s.value}),a.value=!1,i.push("/")}}}},j={class:"character"},J={class:"character__avatar-box"},T=["src","alt"],F={class:"character__name"},H={class:"character__summary"},K={class:"character__summary-bold"},W={class:"result-view__description"},A={class:"result-view__actions"};function G(s,a,i,e,r,n){const d=_("VModal"),o=_("RouterLink"),c=_("DefaultLayout");return g(),b(I,null,[p(d,{show:e.isModalOpen,onOnClose:e.closeModal},{default:u(()=>[t("div",j,[t("div",J,[t("img",{src:e.character.image,alt:e.character.name,class:"character__avatar"},null,8,T)]),t("span",F,m(e.character.name),1),t("p",H,[a[2]||(a[2]=h(" 您成功获得了角色 ",-1)),t("span",K,"«"+m(e.character.name)+"»",1),h("！ "+m(e.character.summary),1)])]),t("button",{class:"action",onClick:a[0]||(a[0]=(...l)=>e.onCharacterSubmited&&e.onCharacterSubmited(...l))},"接受角色")]),_:1},8,["show","onOnClose"]),p(c,{class:"result-view"},{default:u(()=>[a[4]||(a[4]=t("h1",{class:"result-view__title"},"结束了！",-1)),t("span",W,"恭喜！您在本次测验中获得了 "+m(e.score)+" 分！",1),t("div",A,[t("button",{class:"result-view__show-results",onClick:a[1]||(a[1]=(...l)=>e.openModal&&e.openModal(...l))},"查看结果"),p(o,{to:"/quiz",class:"result-view__retry"},{default:u(()=>[...a[3]||(a[3]=[h("重试",-1)])]),_:1})])]),_:1})],64)}const Q=w(D,[["render",G],["__scopeId","data-v-c878ac04"]]);export{Q as default};
