import{_ as w,k as y,w as S,b as g,l as k,f as _,d as b,g as s,m as C,h as M,T as x,D as V,r as v,u as I,c as L,p as z,a as u,e as p,F as E,t as m,q as h,s as N,v as O}from"./index-135a8345.js";const q={name:"VModal",props:{show:{type:String,default:!0}},setup(a,{emit:t}){const d=y(a,"show"),e=()=>{t("on-close")},c=o=>{const n=document.querySelector(".modal-wrapper");o.target===n&&e()},r=o=>{o.key==="Escape"&&e()};return S(d,o=>{o?(document.addEventListener("keyup",r),document.addEventListener("click",c)):(document.removeEventListener("keyup",r),document.removeEventListener("click",c))},{immediate:!0}),{show:d,onBackgroundClicked:c,onEscapeKeyClicked:r}}},B={key:0,class:"modal-wrapper"},R={class:"modal"};function D(a,t,d,e,c,r){return g(),k(x,{name:"modal"},{default:_(()=>[e.show?(g(),b("div",B,[s("div",R,[C(a.$slots,"default",{},void 0,!0)])])):M("",!0)]),_:3})}const j=w(q,[["render",D],["__scopeId","data-v-1701abbd"]]),f=[{name:"酷炫宇航员",summary:"一如既往的优秀，不得不说，这也是我们对您的期望。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/astronaut.jpg",minimumScore:2700},{name:"善良的大象",summary:"这只善良的大象会一直陪伴着你，让你不再感到孤单。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/elephant.jpg",minimumScore:1500},{name:"半死不活的树懒",summary:"也许只要你表现得稍微好一点，你的父母就会为你感到骄傲。",image:"https://github.com/sttatusx/quizzo/raw/main/src/assets/images/sloths.jpg",minimumScore:0}];const J={name:"ResultView",components:{VModal:j,DefaultLayout:V},setup(){const a=v(0),t=v(!1),d=I(),e=L(()=>f.find(n=>a.value>=n.minimumScore));z(()=>{localStorage.getItem("score")&&(a.value=JSON.parse(localStorage.getItem("score")))});const c=()=>{t.value=!0},r=()=>{t.value=!1},i=n=>{let l=[];localStorage.getItem("leaderboard")&&(l=JSON.parse(localStorage.getItem("leaderboard"))),l.push(n),localStorage.setItem("leaderboard",JSON.stringify(l))};return{score:a,isModalOpen:t,characters:f,character:e,openModal:c,closeModal:r,onCharacterSubmited:()=>{i({image:e.value.image,name:e.value.name,score:a.value}),t.value=!1,d.push("/")}}}},T=a=>(N("data-v-c878ac04"),a=a(),O(),a),F={class:"character"},H={class:"character__avatar-box"},K=["src","alt"],W={class:"character__name"},A={class:"character__summary"},G={class:"character__summary-bold"},P=T(()=>s("h1",{class:"result-view__title"},"结束了！",-1)),Q={class:"result-view__description"},U={class:"result-view__actions"};function X(a,t,d,e,c,r){const i=u("VModal"),o=u("RouterLink"),n=u("DefaultLayout");return g(),b(E,null,[p(i,{show:e.isModalOpen,onOnClose:e.closeModal},{default:_(()=>[s("div",F,[s("div",H,[s("img",{src:e.character.image,alt:e.character.name,class:"character__avatar"},null,8,K)]),s("span",W,m(e.character.name),1),s("p",A,[h(" 您成功获得了角色 "),s("span",G,"«"+m(e.character.name)+"»",1),h("！ "+m(e.character.summary),1)])]),s("button",{class:"action",onClick:t[0]||(t[0]=(...l)=>e.onCharacterSubmited&&e.onCharacterSubmited(...l))},"接受角色")]),_:1},8,["show","onOnClose"]),p(n,{class:"result-view"},{default:_(()=>[P,s("span",Q,"恭喜！您在本次测验中获得了 "+m(e.score)+" 分！",1),s("div",U,[s("button",{class:"result-view__show-results",onClick:t[1]||(t[1]=(...l)=>e.openModal&&e.openModal(...l))},"查看结果"),p(o,{to:"/quiz",class:"result-view__retry"},{default:_(()=>[h("重试")]),_:1})])]),_:1})],64)}const Z=w(J,[["render",X],["__scopeId","data-v-c878ac04"]]);export{Z as default};
